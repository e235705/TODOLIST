# 📘 ToDo Discord Bot System - README（構成メイン説明版）

このシステムは **毎日のToDo外枠ファイルを自動生成し、手で書き込んだタスク内容を Discord の `/report` コマンドで送信できる** ようにするためのミニマルな ToDo 管理基盤です。

コード詳細ではなく、**構成・仕組み・役割** に重点を置いて説明します。

---

# 🚀 システムの全体像

この ToDo システムは、以下の 3 要素で構成されています：

## 1️⃣ **外枠を生成する仕組み（main.py）**

* 毎日の ToDo ファイル（Markdown）を自動生成する担当。
* ファイル名は `YYYY-MM-DD.md`。
* テンプレートの内容だけを生成し、通知は行わない。
* あなたがタスクを書き込むための **“空の器”** を作る役割。

📄 出力先フォルダ：

```
~/todo/
```

📄 テンプレート保存場所：

```
templates/default_template.md
```

---

## 2️⃣ **Discord Bot（bot.py）**

* Discord 上で `/report` コマンドを受け取り、当日の ToDo ファイルを読み込んで投稿する役割。
* ユーザーが「完了報告」したいタイミングで、手書きした内容を全文 Discord に送信する。
* Bot は常にオンラインで待機し、指示が来たら ToDo ファイルを読む。

📦 Bot の 役割

* ユーザー操作に応じた通知
* ToDo ファイルの読み取り
* Discord への投稿

Bot の存在により、通知のタイミングを自由に決められるのが強みです。

---

## 3️⃣ **設定ファイル（config.json）**

以下の情報を保存するだけのファイル：

* Discord Bot Token
* Discord Webhook（投稿先チャンネル）

🔐 セキュリティのため、このファイルは `.gitignore` に入れます。

---

# 🧩 システム構成図（コードなし）

```
┌─────────────────────────────────────────┐
│                 ユーザー                  │
│  手書きでToDoを書く → /report と入力       │
└─────────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│                Discord Bot              │
│   /report を受信 → 当日ToDoを読み込む      │
│   → Discord に投稿                         │
└─────────────────────────────────────────┘
                 ▲
                 │
┌─────────────────────────────────────────┐
│              ToDo ファイル              │
│  main.py が作成する外枠テンプレ            │
│  ユーザーが内容を書き込む                  │
└─────────────────────────────────────────┘
                 ▲
                 │
┌─────────────────────────────────────────┐
│                main.py                 │
│   毎朝 or 起動時に外枠テンプレ生成         │
└─────────────────────────────────────────┘
```

---

# 📁 ディレクトリ構成（概要）

```
todo-system/
 ├ main.py                # 外枠生成だけを担当
 ├ bot.py                 # Discord の /report を担当
 ├ config.json            # Token & Webhook を保存（非公開）
 └ templates/
      └ default_template.md   # ToDo 外枠テンプレ
```

各ファイルの責務が明確に分離されており、拡張しやすい作りになっています。

---

# 🔧 Bot を動かすための設定項目（全体構成説明）

## ■ Bot Token 設定

Discord Developer Portal で Bot を作成し、Token を取得して config.json に保存。

## ■ Webhook 設定

Discord チャンネル側で Webhook を作成し、報告投稿の送り先を指定。

## ■ Intent 設定（重要）

Bot が `/report` を認識できるよう、
**Message Content Intent** を ON にする。

## ■ 権限設定（Bot をサーバーへ招待）

* Scopes → `bot` と `applications.commands`
* Permissions → `Send Messages`

---

# 🎯 システムの動作フロー（わかりやすくまとめ）

1. **朝：**

   * main.py が外枠を生成（通知なし）
2. **日中：**

   * あなたが書きたい内容を Markdown に記入
3. **完了：**

   * Discord で `/report` と送信
4. **Bot：**

   * 該当日のファイルを読み取り
   * 中身をそのまま Discord に投稿

これで「外枠自動 → 内容手書き → 完了報告はコマンド操作」が実現します。

---

# 🔮 拡張構想（構成ベースで発展可能）

* `/todo` → 今日のタスクを読み取って即表示
* `/done` → 完了リストだけ抽出して送信
* `/yesterday` → 昨日の ToDo も照会可能に
* ToDo ファイルの Git 自動保存
* Notion / Slack など他サービス連携

構造がシンプルなので拡張しやすい設計です。

---